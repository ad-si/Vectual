/*@preserve vectual by Adrian Sieber*/
(function(e,t,a){function i(e){return e*(Math.PI/180)}function n(){function e(){c([s,[o]])}function t(){function e(e,t){function s(){r=w+r,y=i(r),_=-(Math.cos(y)*a),b=Math.sin(y)*a,h=75>=N?"end":105>=N?"middle":255>=N?"start":285>=N?"middle":"end"}function d(){x=c(["path",{"class":"vectual_pie_sector_path",style:"stroke-width:"+.015*a+";fill:"+f.colors[t],d:"M 0,0 L "+n+","+l+" A "+a+","+a+" "+S+" "+_+","+b+" z"}],u)[0],g=c(["text",{"class":"vectual_pie_text",x:1.2*E,y:1.2*C,"text-anchor":h,style:"font-size:"+(.002*w*a+8)+"px",fill:f.colors[t],transform:"translate(0, 5)"}],u)[0],p=c(["title",f.sorted.keys[t]+" | "+f.sorted.values[t]+" | "+Math.round(100*(f.sorted.values[t]/f.totalValue))+"%"],u)[0]}function v(){c([V,["animateTransform",{attributeName:"transform",begin:"mouseover",type:"translate",to:.2*E+", "+.2*C,dur:"300ms",additive:"replace",fill:"freeze"}],["animateTransform",{attributeName:"transform",begin:"mouseout",type:"translate",to:"0,0",dur:"600ms",additive:"replace",fill:"freeze"}]],u),c([x,["animate",{attributeName:"opacity",from:"0",to:"1",dur:"0.6s",fill:"freeze"}],["animateTransform",{attributeName:"transform",type:"rotate",dur:"1s",calcMode:"spline",keySplines:"0 0 0 1",values:z+",0,0; 0,0,0",additive:"replace",fill:"freeze"}]],u),c([g,["animate",{attributeName:"opacity",begin:"0s",values:"0;0;1",dur:"1s",fill:"freeze"}]],u)}function m(){c([o,[V,[x],[g],[p]]],u)}var h,y,x,g,p,_,b,z=r,w=360*(f.sorted.values[t]/f.totalValue),k=w/2,N=z+k,M=i(N),E=-Math.cos(M)*a,C=Math.sin(M)*a,S=360*(f.sorted.values[t]/f.totalValue)>180?"0 1,0":"0 0,0",V=c(["g",{"class":"vectual_pie_sector"}],u)[0];s(),d(),f.animations&&v(),m(),n=_,l=b}f.totalValue==f.max.value?c([o,["circle",{"class":"vectual_pie_sector",cx:"0",cy:"0",r:a,fill:f.colors[1]}],["text",f.max.key,{"class":"vectual_pie_text_single, vectual_pie_text",x:"0",y:"0",style:"font-size:"+.3*a+"px","text-anchor":"middle","stroke-width":.006*a}]],u):f.data.forEach(e)}var a=Math.min(f.height,.2*f.width),n=-a,l=0,r=0,o=c(["g",{transform:"translate("+.5*f.width+", "+.5*f.height+")"}],u)[0];e(),t()}function l(){function e(){function e(){var e,t;for(t=0;f.size>t;t++)e=0==t?"vectual_coordinate_axis_y":"vectual_coordinate_lines_y",c([h,["line",{"class":e,x1:v/f.size*t,y1:"5",x2:v/f.size*t,y2:-d}],["text",f.keys[t],{"class":"vectual_coordinate_labels_x",transform:"rotate(40 "+v/f.size*t+", 10)",x:v/f.size*t,y:10}]],u)}function t(){var e,t;for(t=0;l*n>=t;t++)e=0==t?"vectual_coordinate_axis_x":"vectual_coordinate_lines_x",c([h,["line",{"class":e,x1:-5,y1:-(d/l)*(t/n),x2:v,y2:-(d/l)*(t/n)}],["text",t/n+f.min.value+"",{"class":"vectual_coordinate_labels_y",x:.05*-v,y:-(d/l)*(t/n)}]],u)}t(),e()}function t(){function e(e,t){function a(){c([r,["animate",{attributeName:"height",to:(f.values[t]-f.min.value)*(d/l),begin:"0s",dur:"1s",fill:"freeze"}],["animate",{attributeName:"y",from:0,to:-(f.values[t]-f.min.value)*(d/l),begin:"0s",dur:"1s",fill:"freeze"}],["animate",{attributeName:"fill",to:"rgb(100,210,255)",begin:"mouseover",dur:"100ms",fill:"freeze",additive:"replace"}],["animate",{attributeName:"fill",to:"rgb(0,150,250)",begin:"mouseout",dur:"200ms",fill:"freeze",additive:"replace"}]],u)}function i(){c([y,[r]])}var n=f.animations?0:(f.values[t]-f.min.value)*(d/l),r=c(["rect",{"class":"vectual_bar_bar",x:t*(v/f.size),y:-(f.values[t]-f.min.value)*(d/l),height:n,width:.7*(v/f.size)},["title",f.keys[t]+":  "+f.values[t]]],u)[0];f.animations&&a(),i()}f.data.forEach(e)}function a(){c([y,["animate",{attributeName:"opacity",from:0,to:.8,begin:"0s",dur:"1s",fill:"freeze",additive:"replace"}]],u)}function i(){c([s,[m,[h],[y]]])}var n=.1,l=f.max.value-f.min.value,r=.8*f.height,o=.95*f.width,d=.6*f.height,v=.85*f.width,m=c(["g",{transform:"translate("+.1*o+", "+r+")"}],u)[0],h=c(["g"],u)[0],y=c(["g"],u)[0];e(),t(),f.animations&&a(),i()}function r(){function e(){c([s,[v]])}function a(){function e(){function e(){for(var e,t=0;f.size>t;t++)e=0==t?"vectual_coordinate_axis_y":"vectual_coordinate_lines_y",c([v,["line",{"class":e,x1:o/f.size*t,y1:5,x2:o/f.size*t,y2:-d}],["text",f.keys[t],{"class":"vectual_coordinate_labels_x",transform:"rotate(40 "+o/f.size*t+", 10)",x:o/f.size*t,y:10}]],u)}function t(){for(var e,t=0;n*i>=t;t++)e=0==t?"vectual_coordinate_axis_x":"vectual_coordinate_lines_x",c([v,["line",{"class":e,x1:-5,y1:-(d/n)*(t/i),x2:o,y2:-(d/n)*(t/i)}],["text",t/i+f.min.value,{"class":"vectual_coordinate_labels_y",x:.05*-o,y:-(d/n)*(t/i)}]],u)}e(),t()}function a(){for(var e,a="",i="",l=0;f.size>l;l++)a+=l*(o/f.size)+",0 ";for(var r=0;f.size>r;r++)i+=r*(o/f.size)+","+(-f.values[r]+f.min.value)*(d/n)+" ";e=v.appendChild(t.createElementNS(u,"polyline")),e.setAttribute("class","vectual_line_line"),e.setAttribute("points",i),f.animations&&c([e,["animate",{attributeName:"points",from:a,to:i,begin:"0s",dur:"1s",fill:"freeze"}],["animate",{attributeName:"opacity",begin:"0s",from:"0",to:"1",dur:"1s",additive:"replace",fill:"freeze"}]],u)}function l(){for(var e,t=0;f.size>t;t++)e=c(["circle",{"class":"vectual_line_dot",r:"4",cx:t*(o/f.size),cy:(-f.values[t]+f.min.value)*(d/n)},["title",f.keys[t]+":  "+f.values[t]]],u)[0],v.appendChild(e),f.animations&&c([e,["animate",{attributeName:"opacity",begin:"0s",values:"0;0;1",keyTimes:"0;0.8;1",dur:"1.5s",additive:"replace",fill:"freeze"}],["animate",{attributeName:"r",to:"8",dur:"0.1s",begin:"mouseover",additive:"replace",fill:"freeze"}],["animate",{attributeName:"r",to:"4",dur:"0.2s",begin:"mouseout",additive:"replace",fill:"freeze"}]],u)}e(),a(),l()}var i=.1,n=f.max.value-f.min.value,l=.95*f.width,r=.8*f.height,o=.85*f.width,d=.6*f.height,v=c(["g",{transform:"translate("+.1*l+", "+r+")"}],u)[0];e(),a()}function o(){function e(){f.data.forEach(function(e){e.fontSize=i+.1*f.height*(e.value-f.min.value)/(f.max.value-f.min.value),e.height=.8*e.fontSize,e.width=.5*e.key.length*e.fontSize}),c([s,[d]])}function t(){function e(){for(i=0;h>i;i++)s=i*(1/l),v=-(1/r)*o*s*Math.cos(s),m=-(1/r)*(1-o)*s*Math.sin(s),y.push({x:v,y:m})}function t(){function e(e,t){function i(){function t(t){function i(i){return i.x!==a?t.x>i.x+i.width||i.x-e.width>t.x||i.y-i.height>t.y||t.y>i.y+e.height:!0}return 1==f.data.every(i)?(e.x=t.x,e.y=t.y,!0):!1}if(0==y.some(t))throw Error("Element could not be positioned")}function n(){c([d,["text",e.key,{"class":"vectual_tagcloud_text",style:"font-size: "+e.fontSize,x:e.x,y:e.y}]],u)}try{return 0==t?e.x=e.y=0:i(),n(),!0}catch(l){return console.log(l.message),!1}}f.data.every(e)}var i,s,v,m,h=n*l*r,y=[];e(),t()}var i=10,n=300,l=10,r=.2,o=.6,d=c(["g",{transform:"translate("+.5*f.width+", "+.5*f.height+")","class":"vectualTagcloud"}],u)[0];e(),t()}var s,u="http://www.w3.org/2000/svg",c=DOMinate,f={id:"demo",title:"vectual.js",inline:!1,animations:!0,height:300,width:500,colors:["yellow","green","blue","brown","grey","yellow","green","blue","brown","yellow","green","blue","brown"]};vectual=function(e){var a,i,d=[],v=[];for(i in e)e.hasOwnProperty(i)&&(f[i]=e[i]);if(!(f.data instanceof Array)){for(a in f.data)f.data.hasOwnProperty(a)&&d.push({key:a,value:f.data[a]});f.data=d}return f.keys=[],f.values=[],f.sorted={keys:[],values:[]},f.size=f.data.length,f.totalValue=0,f.max={},f.min={},f.data.forEach(function(e,t){0==t?f.max=f.min=e:e.value>f.max.value?f.max=e:f.min.value>e.value&&(f.min=e),f.totalValue+=Number(e.value),f.keys.push(e.key),f.values.push(e.value),v.push([e.key,e.value])}),v.sort(function(e,t){return t[1]>e[1]?1:e[1]>t[1]?-1:0}),v.forEach(function(e){f.sorted.keys.push(e[0]),f.sorted.values.push(e[1])}),f.range=f.max.value-f.min.value,s=c(["svg",{version:"1.1","class":f.inline?"vectual_inline":"vectual",width:f.width,height:f.height,viewBox:"0 0 "+f.width+" "+f.height},["defs",["linearGradient#rect_background",{x1:"0%",y1:"0%",x2:"0%",y2:"100%"},["stop",{offset:"0%",style:"stop-color:rgb(80,80,80); stop-opacity:1"}],["stop",{offset:"0%",style:"stop-color:rgb(40,40,40); stop-opacity:1"}]],["filter#dropshadow",["feGaussianBlur",{"in":"SourceAlpha",stdDeviation:.5,result:"blur"}],["feOffset",{"in":"blur",dx:"2",dy:"2",result:"offsetBlur"}],["feComposite",{"in":"SourceGraphic",in2:"offsetBlur",result:"origin"}]]],["rect",{"class":"vectual_background",x:0,y:0,width:f.width,height:f.height,rx:f.inline?"":10,ry:f.inline?"":10}],["text",f.title,{"class":"vectual_title",x:20,y:10+.05*f.height,style:"font-size:"+.05*f.height+"px"}]],u)[0],t.getElementById(f.id).appendChild(s),{pieChart:function(){return new n},lineChart:function(){return new r},barChart:function(){return new l},tagCloud:function(){return new o}}}})(window,document);